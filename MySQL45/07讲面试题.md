本文档作为草稿，不定期删除。
##  行锁
在InnoDB事务中，行锁是在需要的时候才加上的，但并不是不需要了就立刻释放，而是要等到事务结束时才释放。这个就是两阶段锁协议。   
（两阶段提交的内容在02讲）
### 死锁
innodb如何处理死锁？   
*   设置innodb_lock_wait_timeout，超时释放资源。    
*   主动检测死锁。主动回滚死锁链条中的某一个事务，让其他事务得以继续执行。将参数innodb_deadlock_detect设置为on，表示开启这个逻辑。   




### 面试题
###### 1.问题：描述两阶段锁
ps：两阶段加锁是一种加锁思想，可以指导解决实际问题。
###### 2.问题：什么是死锁，死锁的四个必要条件
```
条件-------------------解决方案

互斥                    （没有解决方案）
不可强制占有            请求下一个资源失败必须释放之前的资源
占有且等待              一起请求所有资源
循环等待                对于要请求的资源进行排序
```
